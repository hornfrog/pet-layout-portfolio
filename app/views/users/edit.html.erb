<h2>プロフィール編集</h2>

<%= form_for @user, url: user_path(@user), method: :patch, html: { multipart: true } do |f| %>
  <div>
    <%= f.label :name, "名前" %>
    <%= f.text_field :name %>
  </div>

  <div>
    <%= f.label :profile, "自己紹介" %>
    <%= f.text_area :profile, rows: 3 %>
  </div>

  <div>
    <%= f.label :avatar, "プロフィール画像" %>
    
    <div>
      <% if @user.avatar.attached? %>
        <%= image_tag @user.avatar, id: "avatar-preview", class: "profile-avatar" %>
      <% else %>
        <%= image_tag "no-image.png", id: "avatar-preview", class: "profile-avatar", alt: "デフォルトプロフィール画像" %>
      <% end %>
    </div>

    <%= f.file_field :avatar, id: "avatar-input" %>

    <% if @user.avatar.attached? %>
      <div>
        <%= f.check_box :remove_avatar, { class: "remove-avatar" } %>
        <%= f.label :remove_avatar, "画像を削除" %>
      </div>
    <% end %>
  </div>

  <div>
    <%= f.submit "更新する" %>
  </div>
<% end %>

<%= link_to "戻る", user_path %>
